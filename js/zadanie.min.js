var app=angular.module("appWyszukiwarka",["ngSanitize"]).config(function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","https://en.wikipedia.org/**"])});app.controller("szukajKontroler",["$scope","$http","$document",function(scope,http,document){function szukajWiecej(czego){scope.poleSzukaj=czego}function Wyszukaj(){if(scope.poleSzukaj.length>1){var ua=window.navigator.userAgent;http({url:"https://en.wikipedia.org/w/api.php?",method:"jsonp",headers:ua,params:{format:"json",action:"query",prop:"extracts|pageimages|images|info",piprop:"original",generator:"search",gsrsearch:"intitle:"+scope.poleSzukaj,pilimit:"max",redirects:"",exchars:2500,exlimit:"max",explaintext:!0,exintro:!0,inprop:"url"}}).then(function(response){console.log(response),response.data.query?scope.dane=response.data.query.pages:scope.dane="",console.log(scope.dane)},function(response){console.log(response)})}else scope.dane=""}function showSuggestions(event){event.stopPropagation(),setShowSuggestionFlagTrue()}function setShowSuggestionFlagTrue(){showSugestionsFlag=!0}function setShowSuggestionFlagFalse(){showSugestionsFlag=!1}function isShowSuggestionFlagTrue(){return showSugestionsFlag}var showSugestionsFlag;scope.showSugestionsFlag=!1,scope.showSuggestions=showSuggestions,scope.szukajWiecej=szukajWiecej,scope.Wyszukaj=Wyszukaj,scope.isShowSuggestionFlagTrue=isShowSuggestionFlagTrue,document.on("click",function(){setShowSuggestionFlagFalse(),scope.$apply()})}]);
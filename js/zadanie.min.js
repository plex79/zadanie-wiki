var app=angular.module("appWyszukiwarka",["ngSanitize"]).config(function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(["self","https://en.wikipedia.org/**"])});app.controller("searchController",["$scope","$http","$document",function(scope,http,document){function searchMore(title){scope.searchField=title}function search(){if(scope.searchField.length>1){var ua=window.navigator.userAgent;http({url:"https://en.wikipedia.org/w/api.php?",method:"jsonp",headers:ua,params:{format:"json",action:"query",prop:"extracts|pageimages|images|info",piprop:"original",generator:"search",gsrsearch:"intitle:"+scope.searchField,pilimit:"max",redirects:"",exchars:2500,exlimit:"max",explaintext:!0,exintro:!0,inprop:"url"}}).then(function(response){console.log(response),response.data.query?scope.dataObj=response.data.query.pages:scope.dataObj="",console.log(scope.dataObj)},function(response){console.log(response)})}else scope.dataObj=""}function showSuggestions(event){event.stopPropagation(),setShowSuggestionFlagTrue()}function setShowSuggestionFlagTrue(){showSugestionsFlag=!0}function setShowSuggestionFlagFalse(){showSugestionsFlag=!1}function isShowSuggestionFlagTrue(){return showSugestionsFlag}var showSugestionsFlag;scope.showSugestionsFlag=!1,scope.showSuggestions=showSuggestions,scope.searchMore=searchMore,scope.search=search,scope.isShowSuggestionFlagTrue=isShowSuggestionFlagTrue,document.on("click",function(){setShowSuggestionFlagFalse(),scope.$apply()})}]);